<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings UI Test</title>
    <link rel="stylesheet" href="media/settings.css">
</head>
<body>
    <div class="settings-container">
        <div class="settings-header">
            <h1>Prolog Extension Settings</h1>
            <div class="settings-actions">
                <button id="exportBtn" class="btn btn-secondary">Export Settings</button>
                <button id="importBtn" class="btn btn-secondary">Import Settings</button>
                <button id="resetBtn" class="btn btn-danger">Reset to Defaults</button>
            </div>
        </div>

        <div class="settings-search">
            <input type="text" id="searchInput" placeholder="Search settings..." class="search-input">
        </div>

        <div class="settings-content">
            <!-- Core Settings -->
            <div class="settings-section" data-section="core">
                <h2>Core Settings</h2>
                
                <div class="setting-item">
                    <label for="executablePath">Prolog Executable Path</label>
                    <input type="text" id="executablePath" value="/usr/bin/swipl" data-setting="prolog.executablePath">
                    <div class="setting-description">Path to the Prolog executable</div>
                </div>

                <div class="setting-item">
                    <label for="dialect">Prolog Dialect</label>
                    <select id="dialect" data-setting="prolog.dialect">
                        <option value="swi" selected>SWI-Prolog</option>
                        <option value="gnu">GNU Prolog</option>
                        <option value="sicstus">SICStus Prolog</option>
                        <option value="yap">YAP</option>
                    </select>
                    <div class="setting-description">Prolog dialect to use</div>
                </div>
            </div>

            <!-- Linter Settings -->
            <div class="settings-section" data-section="linter">
                <h2>Linter Settings</h2>
                
                <div class="setting-item">
                    <label for="linterRun">Run Linter</label>
                    <select id="linterRun" data-setting="prolog.linter.run">
                        <option value="onType" selected>On Type</option>
                        <option value="onSave">On Save</option>
                        <option value="never">Never</option>
                    </select>
                    <div class="setting-description">When to run the linter</div>
                </div>

                <div class="setting-item">
                    <label for="linterDelay">Linter Delay (ms)</label>
                    <input type="number" id="linterDelay" value="500" min="0" data-setting="prolog.linter.delay">
                    <div class="setting-description">Delay before running linter after typing</div>
                </div>
            </div>

            <!-- API Server Settings -->
            <div class="settings-section" data-section="api">
                <h2>API Server Settings</h2>
                
                <div class="setting-item">
                    <label for="apiEnabled">
                        <input type="checkbox" id="apiEnabled" data-setting="prolog.apiServer.enabled">
                        Enable API Server
                    </label>
                    <div class="setting-description">Enable the Prolog API server</div>
                </div>

                <div class="setting-item conditional" data-depends="prolog.apiServer.enabled">
                    <label for="apiPort">API Server Port</label>
                    <input type="number" id="apiPort" value="8080" min="1024" max="65535" data-setting="prolog.apiServer.port">
                    <div class="setting-description">Port for the API server</div>
                </div>
            </div>
        </div>
    </div>

    <script src="media/settings.js"></script>
    <script>
        // Test the settings functionality
        console.log('Testing Settings UI...');
        
        // Test search functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.value = 'linter';
        searchInput.dispatchEvent(new Event('input'));
        
        // Test setting changes
        const dialectSelect = document.getElementById('dialect');
        dialectSelect.value = 'gnu';
        dialectSelect.dispatchEvent(new Event('change'));
        
        // Test conditional display
        const apiEnabled = document.getElementById('apiEnabled');
        apiEnabled.checked = true;
        apiEnabled.dispatchEvent(new Event('change'));
        
        console.log('Settings UI test completed successfully!');
        
        // Display test results
        setTimeout(() => {
            const results = document.createElement('div');
            results.innerHTML = `
                <div style="position: fixed; top: 10px; right: 10px; background: #4CAF50; color: white; padding: 10px; border-radius: 5px; z-index: 1000;">
                    ✅ Settings UI Test Passed!<br>
                    • Search functionality working<br>
                    • Setting changes detected<br>
                    • Conditional display working<br>
                    • All UI components loaded
                </div>
            `;
            document.body.appendChild(results);
        }, 1000);
    </script>
</body>
</html>